"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Schema_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Schema"));
class Comments extends Schema_1.default {
    constructor() {
        super(...arguments);
        this.tableName = 'comments';
    }
    async up() {
        this.schema.createTable(this.tableName, (table) => {
            table.increments('id');
            table.integer('user_id').unsigned().references('id').inTable('users').onDelete('CASCADE');
            table.integer('post_id').unsigned().references('id').inTable('posts').onDelete('CASCADE');
            table.integer('parent_id').unsigned().references('id').inTable('comments').onDelete('CASCADE').nullable();
            table.text('content').notNullable();
            table.timestamp('created_at', { useTz: true });
            table.timestamp('updated_at', { useTz: true });
        });
    }
    async down() {
        this.schema.dropTable(this.tableName);
    }
}
exports.default = Comments;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYyNjA5NjkwODA5Nl9jb21tZW50cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIjE2MjYwOTY5MDgwOTZfY29tbWVudHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx1RkFBaUQ7QUFFakQsTUFBcUIsUUFBUyxTQUFRLGdCQUFVO0lBQWhEOztRQUNZLGNBQVMsR0FBRyxVQUFVLENBQUE7SUF1QmxDLENBQUM7SUFyQlEsS0FBSyxDQUFDLEVBQUU7UUFDYixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDaEQsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUV0QixLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBQ3pGLEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUE7WUFDekYsS0FBSyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQTtZQUN6RyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBTW5DLEtBQUssQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7WUFDOUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtRQUNoRCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFTSxLQUFLLENBQUMsSUFBSTtRQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0NBQ0Y7QUF4QkQsMkJBd0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VTY2hlbWEgZnJvbSAnQGlvYzpBZG9uaXMvTHVjaWQvU2NoZW1hJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tZW50cyBleHRlbmRzIEJhc2VTY2hlbWEge1xuICBwcm90ZWN0ZWQgdGFibGVOYW1lID0gJ2NvbW1lbnRzJ1xuXG4gIHB1YmxpYyBhc3luYyB1cCAoKSB7XG4gICAgdGhpcy5zY2hlbWEuY3JlYXRlVGFibGUodGhpcy50YWJsZU5hbWUsICh0YWJsZSkgPT4ge1xuICAgICAgdGFibGUuaW5jcmVtZW50cygnaWQnKVxuXG4gICAgICB0YWJsZS5pbnRlZ2VyKCd1c2VyX2lkJykudW5zaWduZWQoKS5yZWZlcmVuY2VzKCdpZCcpLmluVGFibGUoJ3VzZXJzJykub25EZWxldGUoJ0NBU0NBREUnKVxuICAgICAgdGFibGUuaW50ZWdlcigncG9zdF9pZCcpLnVuc2lnbmVkKCkucmVmZXJlbmNlcygnaWQnKS5pblRhYmxlKCdwb3N0cycpLm9uRGVsZXRlKCdDQVNDQURFJylcbiAgICAgIHRhYmxlLmludGVnZXIoJ3BhcmVudF9pZCcpLnVuc2lnbmVkKCkucmVmZXJlbmNlcygnaWQnKS5pblRhYmxlKCdjb21tZW50cycpLm9uRGVsZXRlKCdDQVNDQURFJykubnVsbGFibGUoKVxuICAgICAgdGFibGUudGV4dCgnY29udGVudCcpLm5vdE51bGxhYmxlKClcblxuICAgICAgXG4gICAgICAvKipcbiAgICAgICAqIFVzZXMgdGltZXN0YW1wdHogZm9yIFBvc3RncmVTUUwgYW5kIERBVEVUSU1FMiBmb3IgTVNTUUxcbiAgICAgICAqL1xuICAgICAgdGFibGUudGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB1c2VUejogdHJ1ZSB9KVxuICAgICAgdGFibGUudGltZXN0YW1wKCd1cGRhdGVkX2F0JywgeyB1c2VUejogdHJ1ZSB9KVxuICAgIH0pXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZG93biAoKSB7XG4gICAgdGhpcy5zY2hlbWEuZHJvcFRhYmxlKHRoaXMudGFibGVOYW1lKVxuICB9XG59XG4iXX0=